# Migration `20200731220549-rename_color_table_to_hue`

This migration has been generated by siongesteban at 7/31/2020, 10:05:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."unique_shade"

ALTER TABLE "public"."shade" DROP CONSTRAINT "shade_color_id_fkey"

CREATE TABLE "public"."hue" (
"id" SERIAL,
"name" text  NOT NULL ,
"created_at" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id"))

ALTER TABLE "public"."shade" DROP COLUMN "color_id",
ADD COLUMN "hue_id" integer  NOT NULL ;

CREATE UNIQUE INDEX "unique_hue" ON "public"."hue"("name")

CREATE UNIQUE INDEX "unique_shade" ON "public"."shade"("number","hue_id")

ALTER TABLE "public"."shade" ADD FOREIGN KEY ("hue_id")REFERENCES "public"."hue"("id") ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE "public"."color";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200731185500-create_initial_shade_table..20200731220549-rename_color_table_to_hue
--- datamodel.dml
+++ datamodel.dml
@@ -2,36 +2,36 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
-model Color {
+model Hue {
   id        Int      @default(autoincrement()) @id
   name      String
   shades    Shade[]
   createdAt DateTime @map("created_at") @default(now())
-  @@map("color")
-  @@unique([name], name: "unique_color")
+  @@map("hue")
+  @@unique([name], name: "unique_hue")
 }
 model Shade {
   id        Int         @default(autoincrement()) @id
   hex       String
   number    ShadeNumber
   createdAt DateTime    @map("created_at") @default(now())
-  color   Color @relation(fields: [colorId], references: [id])
-  colorId Int   @map("color_id")
+  hue   Hue @relation(fields: [hueId], references: [id])
+  hueId Int @map("hue_id")
   @@map("shade")
-  @@unique([number, colorId], name: "unique_shade")
+  @@unique([number, hueId], name: "unique_shade")
 }
 enum ShadeNumber {
   S100
```


